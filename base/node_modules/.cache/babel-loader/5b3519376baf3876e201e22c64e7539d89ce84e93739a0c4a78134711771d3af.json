{"ast":null,"code":"import _initializerDefineProperty from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _dec, _dec2, _class, _class2, _descriptor;\nimport { action, observable } from \"mobx\";\nimport Container, { Service } from \"typedi\";\nimport { HttpService } from \"./http.service\";\nexport const USER_KEY = \"user\";\nexport const USER_ACCESS_TOKEN = \"access_token\";\nexport let AuthService = (_dec = Service(), _dec2 = action.bound, _dec(_class = (_class2 = class AuthService {\n  constructor() {\n    _initializerDefineProperty(this, \"user\", _descriptor, this);\n    this.httpService = Container.get(HttpService);\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      this.user = JSON.parse(user);\n    }\n  }\n  setUser(user) {\n    if (this.user) {\n      this.user = {\n        ...this.user,\n        ...user\n      };\n    }\n  }\n  async signIn(loginDTO) {\n    const {\n      data\n    } = await this.httpService.request(loginDTO);\n    localStorage.setItem(USER_ACCESS_TOKEN, data.access_token);\n    return data;\n  }\n  async getForgotPass(forgotPassDTO) {\n    return this.httpService.request(forgotPassDTO);\n  }\n  async getResetPass(resetPassDTO) {\n    return this.httpService.request(resetPassDTO);\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"user\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setUser\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"setUser\"), _class2.prototype)), _class2)) || _class);","map":{"version":3,"names":["action","observable","Container","Service","HttpService","USER_KEY","USER_ACCESS_TOKEN","AuthService","bound","constructor","httpService","get","user","localStorage","getItem","JSON","parse","setUser","signIn","loginDTO","data","request","setItem","access_token","getForgotPass","forgotPassDTO","getResetPass","resetPassDTO"],"sources":["C:/reactjs/bnk_fe_training/base/src/services/auth.service.ts"],"sourcesContent":["import { action, observable } from \"mobx\";\r\nimport { User } from \"shared/business/user\";\r\nimport { ResponseDTO } from \"shared/dto/base.dto\";\r\nimport { ForgotPassDTO, ForgotPassResponse } from \"shared/dto/forgot-pass.dto\";\r\nimport { LoginDTO, LoginResponse } from \"shared/dto/login.dto\";\r\nimport { ResetPassDTO, ResetPassResponse } from \"shared/dto/reset-pass.dto\";\r\nimport Container, { Service } from \"typedi\";\r\nimport { HttpService } from \"./http.service\";\r\n\r\nexport const USER_KEY = \"user\";\r\nexport const USER_ACCESS_TOKEN = \"access_token\";\r\n\r\n@Service()\r\nexport class AuthService {\r\n\t@observable\r\n\tprivate user?: User;\r\n\r\n\tprivate httpService = Container.get(HttpService);\r\n\r\n\tpublic constructor() {\r\n\t\tconst user = localStorage.getItem(\"user\");\r\n\t\tif (user) {\r\n\t\t\tthis.user = JSON.parse(user);\r\n\t\t}\r\n\t}\r\n\r\n\t@action.bound\r\n\tpublic setUser(user: Partial<User>): void {\r\n\t\tif (this.user) {\r\n\t\t\tthis.user = { ...this.user, ...user };\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async signIn(loginDTO: LoginDTO): Promise<LoginResponse> {\r\n\t\tconst { data } = await this.httpService.request(loginDTO);\r\n\t\tlocalStorage.setItem(USER_ACCESS_TOKEN, data.access_token);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tpublic async getForgotPass(\r\n\t\tforgotPassDTO: ForgotPassDTO\r\n\t): Promise<ResponseDTO<ForgotPassResponse>> {\r\n\t\treturn this.httpService.request(forgotPassDTO);\r\n\t}\r\n\r\n\tpublic async getResetPass(resetPassDTO: ResetPassDTO): Promise<ResponseDTO<ResetPassResponse>> {\r\n\t\treturn this.httpService.request(resetPassDTO);\r\n\t}\r\n}\r\n"],"mappings":";;;;AAAA,SAASA,MAAM,EAAEC,UAAU,QAAQ,MAAM;AAMzC,OAAOC,SAAS,IAAIC,OAAO,QAAQ,QAAQ;AAC3C,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC9B,OAAO,MAAMC,iBAAiB,GAAG,cAAc;AAE/C,WACaC,WAAW,WADvBJ,OAAO,EAAE,UAcRH,MAAM,CAACQ,KAAK,2BAdd,MACaD,WAAW,CAAC;EAMjBE,WAAW,GAAG;IAAA;IAAA,KAFbC,WAAW,GAAGR,SAAS,CAACS,GAAG,CAACP,WAAW,CAAC;IAG/C,MAAMQ,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,IAAIF,IAAI,EAAE;MACT,IAAI,CAACA,IAAI,GAAGG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;IAC7B;EACD;EAGOK,OAAO,CAACL,IAAmB,EAAQ;IACzC,IAAI,IAAI,CAACA,IAAI,EAAE;MACd,IAAI,CAACA,IAAI,GAAG;QAAE,GAAG,IAAI,CAACA,IAAI;QAAE,GAAGA;MAAK,CAAC;IACtC;EACD;EAEA,MAAaM,MAAM,CAACC,QAAkB,EAA0B;IAC/D,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAM,IAAI,CAACV,WAAW,CAACW,OAAO,CAACF,QAAQ,CAAC;IACzDN,YAAY,CAACS,OAAO,CAAChB,iBAAiB,EAAEc,IAAI,CAACG,YAAY,CAAC;IAC1D,OAAOH,IAAI;EACZ;EAEA,MAAaI,aAAa,CACzBC,aAA4B,EACe;IAC3C,OAAO,IAAI,CAACf,WAAW,CAACW,OAAO,CAACI,aAAa,CAAC;EAC/C;EAEA,MAAaC,YAAY,CAACC,YAA0B,EAA2C;IAC9F,OAAO,IAAI,CAACjB,WAAW,CAACW,OAAO,CAACM,YAAY,CAAC;EAC9C;AACD,CAAC,uEAlCC1B,UAAU;EAAA;EAAA;EAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}