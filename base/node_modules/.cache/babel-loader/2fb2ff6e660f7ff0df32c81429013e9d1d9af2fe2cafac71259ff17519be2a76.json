{"ast":null,"code":"import _initializerDefineProperty from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"C:/reactjs/bnk_fe_training/base/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _dec, _dec2, _class, _class2, _descriptor;\nimport { action, observable } from \"mobx\";\nimport Container, { Service } from \"typedi\";\nimport { HttpService } from \"./http.service\";\nexport const USER_KEY = \"user\";\nexport const USER_ACCESS_TOKEN = \"access_token\";\nexport let AuthService = (_dec = Service(), _dec2 = action.bound, _dec(_class = (_class2 = class AuthService {\n  constructor() {\n    _initializerDefineProperty(this, \"user\", _descriptor, this);\n    this.httpService = Container.get(HttpService);\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      this.user = JSON.parse(user);\n    }\n  }\n  setUser(user) {\n    if (this.user) {\n      this.user = {\n        ...this.user,\n        ...user\n      };\n    }\n  }\n  async signIn(loginDTO) {\n    const {\n      data\n    } = await this.httpService.request(loginDTO);\n    localStorage.setItem(USER_ACCESS_TOKEN, data.access_token);\n    return data;\n  }\n  async getForgotPass(forgotPassDTO) {\n    return this.httpService.request(forgotPassDTO);\n  }\n  async getResetPass(resetPassDTO) {\n    return this.httpService.request(resetPassDTO);\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"user\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setUser\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"setUser\"), _class2.prototype)), _class2)) || _class);","map":{"version":3,"names":["action","observable","Container","Service","HttpService","USER_KEY","USER_ACCESS_TOKEN","AuthService","bound","constructor","httpService","get","user","localStorage","getItem","JSON","parse","setUser","signIn","loginDTO","data","request","setItem","access_token","getForgotPass","forgotPassDTO","getResetPass","resetPassDTO"],"sources":["C:/reactjs/bnk_fe_training/base/src/services/auth.service.ts"],"sourcesContent":["import { action, observable } from \"mobx\"\nimport { User } from \"shared/business/user\"\nimport { ResponseDTO } from \"shared/dto/base.dto\"\nimport { ForgotPassDTO, ForgotPassResponse } from \"shared/dto/forgot-pass.dto\"\nimport { LoginDTO, LoginResponse } from \"shared/dto/login.dto\"\nimport { ResetPassDTO, ResetPassResponse } from \"shared/dto/reset-pass.dto\"\nimport Container, { Service } from \"typedi\"\nimport { HttpService } from \"./http.service\"\n\nexport const USER_KEY = \"user\"\nexport const USER_ACCESS_TOKEN = \"access_token\"\n\n@Service()\nexport class AuthService {\n  @observable\n  private user?: User\n\n  private httpService = Container.get(HttpService)\n\n  public constructor() {\n    const user = localStorage.getItem(\"user\")\n    if (user) {\n      this.user = JSON.parse(user)\n    }\n  }\n\n  @action.bound\n  public setUser(user: Partial<User>): void {\n    if (this.user) {\n      this.user = { ...this.user, ...user }\n    }\n  }\n\n  public async signIn(loginDTO: LoginDTO): Promise<LoginResponse> {\n    const { data } = await this.httpService.request(loginDTO)\n    localStorage.setItem(USER_ACCESS_TOKEN, data.access_token)\n    return data\n  }\n\n  public async getForgotPass(\n    forgotPassDTO: ForgotPassDTO\n  ): Promise<ResponseDTO<ForgotPassResponse>> {\n    return this.httpService.request(forgotPassDTO)\n  }\n\n  public async getResetPass(resetPassDTO: ResetPassDTO): Promise<ResponseDTO<ResetPassResponse>> {\n    return this.httpService.request(resetPassDTO)\n  }\n}\n"],"mappings":";;;;AAAA,SAASA,MAAM,EAAEC,UAAU,QAAQ,MAAM;AAMzC,OAAOC,SAAS,IAAIC,OAAO,QAAQ,QAAQ;AAC3C,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC9B,OAAO,MAAMC,iBAAiB,GAAG,cAAc;AAE/C,WACaC,WAAW,WADvBJ,OAAO,EAAE,UAcPH,MAAM,CAACQ,KAAK,2BAdf,MACaD,WAAW,CAAC;EAMhBE,WAAW,GAAG;IAAA;IAAA,KAFbC,WAAW,GAAGR,SAAS,CAACS,GAAG,CAACP,WAAW,CAAC;IAG9C,MAAMQ,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,IAAIF,IAAI,EAAE;MACR,IAAI,CAACA,IAAI,GAAGG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;IAC9B;EACF;EAGOK,OAAO,CAACL,IAAmB,EAAQ;IACxC,IAAI,IAAI,CAACA,IAAI,EAAE;MACb,IAAI,CAACA,IAAI,GAAG;QAAE,GAAG,IAAI,CAACA,IAAI;QAAE,GAAGA;MAAK,CAAC;IACvC;EACF;EAEA,MAAaM,MAAM,CAACC,QAAkB,EAA0B;IAC9D,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAM,IAAI,CAACV,WAAW,CAACW,OAAO,CAACF,QAAQ,CAAC;IACzDN,YAAY,CAACS,OAAO,CAAChB,iBAAiB,EAAEc,IAAI,CAACG,YAAY,CAAC;IAC1D,OAAOH,IAAI;EACb;EAEA,MAAaI,aAAa,CACxBC,aAA4B,EACc;IAC1C,OAAO,IAAI,CAACf,WAAW,CAACW,OAAO,CAACI,aAAa,CAAC;EAChD;EAEA,MAAaC,YAAY,CAACC,YAA0B,EAA2C;IAC7F,OAAO,IAAI,CAACjB,WAAW,CAACW,OAAO,CAACM,YAAY,CAAC;EAC/C;AACF,CAAC,uEAlCE1B,UAAU;EAAA;EAAA;EAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}